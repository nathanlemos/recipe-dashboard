(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-05a54293"],{"0cb2":function(t,e,n){var i=n("7b0b"),r=Math.floor,o="".replace,a=/\$([$&'`]|\d\d?|<[^>]*>)/g,s=/\$([$&'`]|\d\d?)/g;t.exports=function(t,e,n,c,d,u){var l=n+t.length,h=c.length,f=s;return void 0!==d&&(d=i(d),f=a),o.call(u,f,(function(i,o){var a;switch(o.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,n);case"'":return e.slice(l);case"<":a=d[o.slice(1,-1)];break;default:var s=+o;if(0===s)return i;if(s>h){var u=r(s/10);return 0===u?i:u<=h?void 0===c[u-1]?o.charAt(1):c[u-1]+o.charAt(1):i}a=c[s-1]}return void 0===a?"":a}))}},1148:function(t,e,n){"use strict";var i=n("a691"),r=n("1d80");t.exports="".repeat||function(t){var e=String(r(this)),n="",o=i(t);if(o<0||o==1/0)throw RangeError("Wrong number of repetitions");for(;o>0;(o>>>=1)&&(e+=e))1&o&&(n+=e);return n}},2446:function(t,e,n){"use strict";n("a4d3"),n("e01a"),n("d3b7"),n("d28b"),n("3ca3"),n("ddb0");function i(t){return i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}n("25f0"),n("159b"),n("b64b"),e["a"]={methods:{showMessage:function(t,e){var n="Success!",i="#27ae60",r=60,o=(+new Date).toString(),a=document.getElementsByClassName("toast");"error"===t&&(n="Error!",i="#e74c3c");var s=document.createElement("div");s.id=o,s.classList.add("toast"),s.classList.add("shadow"),s.style.backgroundColor=i,s.style.top=r.toString()+"px",s.style.opacity=0;var c=document.createElement("h2");c.innerText=n;var d=document.createElement("ul");if(e&&e.length&&e.forEach((function(t){var e=document.createElement("li");e.innerText=t,d.appendChild(e)})),s.appendChild(c),s.appendChild(d),document.body.appendChild(s),a&&a.length){var u=15+s.offsetHeight;a.forEach((function(t){if(t.id!==o){var e=t.offsetTop+u;t.style.top=e.toString()+"px"}}))}s.style.opacity=1,setTimeout((function(){s.style.opacity=0,setTimeout((function(){s.remove()}),500)}),5e3)},handleResponseErrorPayload:function(t){var e=["An error occured"];t&&(t.response?"object"===i(t.response)&&t.response.data?t.response.data.errors?e=[t.response.data.errors]:t.response.data.message?e=[t.response.data.message]:"object"===i(t.response.data)&&(e=[],Object.keys(t.response.data).forEach((function(n){e.push(n+" "+t.response.data[n][0])}))):"string"===typeof t.response&&(e=[t.response]):t.messages?e=t.messages:"string"===typeof t&&(e=[t])),this.showMessage("error",e)}}}},2532:function(t,e,n){"use strict";var i=n("23e7"),r=n("5a34"),o=n("1d80"),a=n("ab13");i({target:"String",proto:!0,forced:!a("includes")},{includes:function(t){return!!~String(o(this)).indexOf(r(t),arguments.length>1?arguments[1]:void 0)}})},"25f0":function(t,e,n){"use strict";var i=n("6eeb"),r=n("825a"),o=n("d039"),a=n("ad6d"),s="toString",c=RegExp.prototype,d=c[s],u=o((function(){return"/a/b"!=d.call({source:"a",flags:"b"})})),l=d.name!=s;(u||l)&&i(RegExp.prototype,s,(function(){var t=r(this),e=String(t.source),n=t.flags,i=String(void 0===n&&t instanceof RegExp&&!("flags"in c)?a.call(t):n);return"/"+e+"/"+i}),{unsafe:!0})},"378c":function(t,e,n){"use strict";n.r(e);n("b0c0"),n("a4d3"),n("e01a");var i=n("7a23"),r=Object(i["G"])("data-v-63111275");Object(i["s"])("data-v-63111275");var o={class:"inner-container"},a={class:"h1"},s=Object(i["f"])(" recipe "),c={class:"grid"},d={class:"col-4"},u={class:"grid"},l={class:"col-12"},h={class:"form-group"},f=Object(i["g"])("label",{for:""},"Name:",-1),g={class:"col-12"},b={class:"form-group"},p=Object(i["g"])("label",{for:""},"Description:",-1),v={class:"col-12"},m={class:"form-group"},j=Object(i["g"])("label",{for:""},"Total cost:",-1),O={class:"total-cost"},y={class:"col-8"},E={class:"ingredients-box"},w={class:"grid"},x={class:"col-10"},S={class:"form-group"},I=Object(i["g"])("label",{for:""},"Ingredient:",-1),R={class:"col-2"},C={class:"form-group"},T=Object(i["g"])("label",{for:""},"Qt:",-1),q={class:"col-12"},k={class:"col-12"},A={class:"table"},$=Object(i["g"])("thead",null,[Object(i["g"])("tr",null,[Object(i["g"])("td",null,"Action"),Object(i["g"])("td",null,"Ingredient"),Object(i["g"])("td",null,"Cost"),Object(i["g"])("td",null,"Quantity"),Object(i["g"])("td",null,"Total cost")])],-1),N=Object(i["g"])("i",{class:"icon-trash"},null,-1),_={key:0},D={key:0},F={key:0},M={key:0},P=Object(i["g"])("td",{colspan:"5"}," No items found ",-1),U={class:"col-12 lg-only"},L={class:"btn",type:"submit"};Object(i["q"])();var B=r((function(t,e,n,r,B,V){var G=Object(i["w"])("breadcrumbs"),Q=Object(i["w"])("fab");return Object(i["p"])(),Object(i["d"])("div",o,[Object(i["g"])(G,{routerName:"recipeList",name:"Recipes list"}),Object(i["g"])("h1",a,[Object(i["g"])("strong",null,Object(i["y"])(t.isEditing?"Update":"Create"),1),s]),Object(i["g"])("form",{action:"javascript:;",onSubmit:e[6]||(e[6]=Object(i["F"])((function(t){return V.submit()}),["prevent"]))},[Object(i["g"])("div",c,[Object(i["g"])("div",d,[Object(i["g"])("div",u,[Object(i["g"])("div",l,[Object(i["g"])("div",h,[f,Object(i["E"])(Object(i["g"])("input",{type:"text",placeholder:"Name","onUpdate:modelValue":e[1]||(e[1]=function(t){return B.model.name=t})},null,512),[[i["B"],B.model.name]])])]),Object(i["g"])("div",g,[Object(i["g"])("div",b,[p,Object(i["E"])(Object(i["g"])("textarea",{"onUpdate:modelValue":e[2]||(e[2]=function(t){return B.model.description=t}),cols:"30",rows:"4"},null,512),[[i["B"],B.model.description]])])]),Object(i["g"])("div",v,[Object(i["g"])("div",m,[j,Object(i["g"])("div",O," €"+Object(i["y"])(V.totalCost),1)])])])]),Object(i["g"])("div",y,[Object(i["g"])("div",E,[Object(i["g"])("div",w,[Object(i["g"])("div",x,[Object(i["g"])("div",S,[I,Object(i["E"])(Object(i["g"])("select",{"onUpdate:modelValue":e[3]||(e[3]=function(t){return B.newIngredient.ingredient=t})},[(Object(i["p"])(!0),Object(i["d"])(i["a"],null,Object(i["v"])(B.ingredientOptions,(function(t){return Object(i["p"])(),Object(i["d"])("option",{key:t.value,value:t},Object(i["y"])(t.label),9,["value"])})),128))],512),[[i["A"],B.newIngredient.ingredient]])])]),Object(i["g"])("div",R,[Object(i["g"])("div",C,[T,Object(i["E"])(Object(i["g"])("input",{type:"text",placeholder:"Qt","onUpdate:modelValue":e[4]||(e[4]=function(t){return B.newIngredient.quantity=t}),inputmode:"numeric"},null,512),[[i["B"],B.newIngredient.quantity]])])]),Object(i["g"])("div",q,[Object(i["g"])("button",{class:"btn",type:"button",onClick:e[5]||(e[5]=function(){return V.add&&V.add.apply(V,arguments)})},"Add ingredient")]),Object(i["g"])("div",k,[Object(i["g"])("table",A,[$,Object(i["g"])("tbody",null,[(Object(i["p"])(!0),Object(i["d"])(i["a"],null,Object(i["v"])(B.ingredients,(function(e){return Object(i["p"])(),Object(i["d"])("tr",{key:e.index},[Object(i["g"])("td",null,[Object(i["g"])("button",{class:"btn-table-remove",type:"button",onClick:function(t){return V.remove(e.index)}},[N],8,["onClick"])]),Object(i["g"])("td",null,Object(i["y"])(e.name),1),Object(i["g"])("td",null,[e.details&&e.details.unit?(Object(i["p"])(),Object(i["d"])("div",_," €"+Object(i["y"])(t.formatCost(e.details.cost))+" / ("+Object(i["y"])(e.details.avg_quantity)+" "+Object(i["y"])(e.details.unit.name)+") ",1)):Object(i["e"])("",!0)]),Object(i["g"])("td",null,[e.details&&e.details.unit?(Object(i["p"])(),Object(i["d"])("div",D,Object(i["y"])(e.quantity)+" "+Object(i["y"])(e.details.unit.name),1)):Object(i["e"])("",!0)]),Object(i["g"])("td",null,[e.details&&e.details.unit&&e.quantity?(Object(i["p"])(),Object(i["d"])("div",F," €"+Object(i["y"])(t.formatCost(t.calculateCost(e))),1)):Object(i["e"])("",!0)])])})),128)),B.ingredients&&B.ingredients.length?Object(i["e"])("",!0):(Object(i["p"])(),Object(i["d"])("tr",M,[P]))])])])])])]),Object(i["g"])("div",U,[Object(i["g"])("button",L,Object(i["y"])(t.isEditing?"Update":"Create"),1)])]),Object(i["g"])(Q,{icon:"✓",onClick:V.submit},null,8,["onClick"])],32)])})),V=(n("159b"),n("7db0"),n("4de4"),n("d81d"),n("3cdc")),G=n("2446"),Q=n("ca39"),J={name:"RecipeForm",data:function(){return{endpoint:"recipes/",route:"/recipe",ingredientOptions:[],newIngredient:{ingredient:null,quantity:0},ingredients:[],model:{id:null,name:"",description:"",ingredients:[]}}},computed:{totalCost:function(){var t=this,e=0;return this.ingredients.forEach((function(n){e+=t.calculateCost(n)})),this.formatCost(e)}},methods:{submit:function(){var t=this;this.model.ingredients=this.ingredientsToPayload();var e=this.canSubmit();if(!e.allowed)return this.handleSubmitRequestError(e);var n=this.model.id?this.axios.put(this.endpoint+this.model.id,this.model):this.axios.post(this.endpoint,this.model);n.then((function(e){t.showMessage("success",["Done!"]),t.$router.push({path:t.route})})).catch((function(e){return t.handleResponseError(e)}))},handleDetailsResponse:function(t){this.model=t.data,this.ingredients=this.payloadToIngredients(t.data.ingredients)},add:function(){var t=this,e=this.ingredients.find((function(e){return parseInt(e.details.ingredient_id)===parseInt(t.newIngredient.ingredient.details.id)}));if(e)return this.handleSubmitRequestError({response:{messages:["The selected ingredient is already in the recipe"]}});if(!this.newIngredient.ingredient||!this.newIngredient.quantity||isNaN(this.newIngredient.quantity))return this.handleSubmitRequestError({response:{messages:["Inform the ingredient and a valid quantity"]}});var n=this.ingredients.length;this.newIngredient.ingredient.details.ingredient_id=this.newIngredient.ingredient.value,this.ingredients.push({index:n,id:this.newIngredient.ingredient.value,name:this.newIngredient.ingredient.label,quantity:this.newIngredient.quantity,details:this.newIngredient.ingredient.details}),this.newIngredient.ingredient=null,this.newIngredient.quantity=0},remove:function(t){this.ingredients=this.ingredients.filter((function(e){return e.index!==t}))},ingredientsToPayload:function(){return this.ingredients.map((function(t){return{id:t.id,quantity:t.quantity}}))},payloadToIngredients:function(t){return t.map((function(t,e){return{index:e,id:t.ingredient_id,name:t.name,quantity:t.quantity,details:t}}))},fetchIngredients:function(){var t=this,e=this;this.axios.get("ingredients/").then((function(t){var n=t.data.map((function(t){return{value:t.id,label:t.name,details:t}}));e.ingredientOptions=n,e.beforeRetrieve()})).catch((function(e){return t.handleResponseError(e)}))},canSubmit:function(){var t=[];return(!this.model.name||this.model.name.length<3)&&t.push("Name: Ensure this field has at least 3 characters."),(!this.model.description||this.model.description.length<3)&&t.push("Description: Ensure this field has at least 3 characters."),this.model.ingredients&&this.model.ingredients.length||t.push("Ingredients: Inform at least 1 ingredient."),t.length?{response:{messages:t}}:{allowed:!0}}},mixins:[V["a"],G["a"],Q["a"]],mounted:function(){this.fetchIngredients()}};n("7fd2");J.render=B,J.__scopeId="data-v-63111275";e["default"]=J},"3cdc":function(t,e,n){"use strict";n("a15b");var i=n("103c");e["a"]={data:function(){return{model:{},isEditing:!1,listViewName:"",route:"",collection:[]}},methods:{retrieve:function(){var t=this;this.axios.get(this.endpoint).then((function(e){t.collection=e.data})).catch((function(e){return t.handleResponseError(e)}))},destroy:function(t){var e=this;confirm(i["a"].DELETE_CONFIRMATION_MESSAGE)&&this.axios.delete(this.endpoint+t).then((function(t){e.showMessage("success",["Done!"]),e.retrieve()})).catch((function(t){return e.handleResponseError(t)}))},details:function(t){var e=this;this.axios.get(this.endpoint+t).then((function(t){return e.handleDetailsResponse(t)})).catch((function(t){return e.handleResponseError(t)}))},submit:function(){var t=this,e=this.canSubmit();if(!e.allowed)return this.handleSubmitRequestError(e);var n=this.model.id?this.axios.put(this.endpoint+this.model.id,this.model):this.axios.post(this.endpoint,this.model);n.then((function(e){return t.handleSubmitResponse(e)})).catch((function(e){return t.handleResponseError(e)}))},canSubmit:function(){return{allowed:!0}},beforeRetrieve:function(){this.$route.params&&this.$route.params.id&&(this.details(this.$route.params.id),this.isEditing=!0)},handleSubmitResponse:function(t){this.showMessage("success",["Done!"]),this.$router.push({path:this.route})},handleDetailsResponse:function(t){this.model=t.data},handleSubmitRequestError:function(t){this.handleResponseErrorPayload(t.response)},handleResponseError:function(t){this.handleResponseErrorPayload(t)},navigateToAdd:function(){this.$router.push({path:[this.route,"add"].join("/")})},navigateTo:function(t){this.$router.push({path:[this.route,"edit",t].join("/")})},navigateToDetails:function(t){this.$router.push({path:[this.route,"details",t].join("/")})}}}},"408a":function(t,e,n){var i=n("c6b6");t.exports=function(t){if("number"!=typeof t&&"Number"!=i(t))throw TypeError("Incorrect invocation");return+t}},"44e7":function(t,e,n){var i=n("861d"),r=n("c6b6"),o=n("b622"),a=o("match");t.exports=function(t){var e;return i(t)&&(void 0!==(e=t[a])?!!e:"RegExp"==r(t))}},5319:function(t,e,n){"use strict";var i=n("d784"),r=n("825a"),o=n("50c4"),a=n("a691"),s=n("1d80"),c=n("8aa5"),d=n("0cb2"),u=n("14c3"),l=Math.max,h=Math.min,f=function(t){return void 0===t?t:String(t)};i("replace",2,(function(t,e,n,i){var g=i.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,b=i.REPLACE_KEEPS_$0,p=g?"$":"$0";return[function(n,i){var r=s(this),o=void 0==n?void 0:n[t];return void 0!==o?o.call(n,r,i):e.call(String(r),n,i)},function(t,i){if(!g&&b||"string"===typeof i&&-1===i.indexOf(p)){var s=n(e,t,this,i);if(s.done)return s.value}var v=r(t),m=String(this),j="function"===typeof i;j||(i=String(i));var O=v.global;if(O){var y=v.unicode;v.lastIndex=0}var E=[];while(1){var w=u(v,m);if(null===w)break;if(E.push(w),!O)break;var x=String(w[0]);""===x&&(v.lastIndex=c(m,o(v.lastIndex),y))}for(var S="",I=0,R=0;R<E.length;R++){w=E[R];for(var C=String(w[0]),T=l(h(a(w.index),m.length),0),q=[],k=1;k<w.length;k++)q.push(f(w[k]));var A=w.groups;if(j){var $=[C].concat(q,T,m);void 0!==A&&$.push(A);var N=String(i.apply(void 0,$))}else N=d(C,m,T,q,A,i);T>=I&&(S+=m.slice(I,T)+N,I=T+C.length)}return S+m.slice(I)}]}))},"5a34":function(t,e,n){var i=n("44e7");t.exports=function(t){if(i(t))throw TypeError("The method doesn't accept regular expressions");return t}},"7db0":function(t,e,n){"use strict";var i=n("23e7"),r=n("b727").find,o=n("44d2"),a="find",s=!0;a in[]&&Array(1)[a]((function(){s=!1})),i({target:"Array",proto:!0,forced:s},{find:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),o(a)},"7fd2":function(t,e,n){"use strict";n("bb76")},"8aa5":function(t,e,n){"use strict";var i=n("6547").charAt;t.exports=function(t,e,n){return e+(n?i(t,e).length:1)}},a15b:function(t,e,n){"use strict";var i=n("23e7"),r=n("44ad"),o=n("fc6a"),a=n("a640"),s=[].join,c=r!=Object,d=a("join",",");i({target:"Array",proto:!0,forced:c||!d},{join:function(t){return s.call(o(this),void 0===t?",":t)}})},ab13:function(t,e,n){var i=n("b622"),r=i("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[r]=!1,"/./"[t](e)}catch(i){}}return!1}},b680:function(t,e,n){"use strict";var i=n("23e7"),r=n("a691"),o=n("408a"),a=n("1148"),s=n("d039"),c=1..toFixed,d=Math.floor,u=function(t,e,n){return 0===e?n:e%2===1?u(t,e-1,n*t):u(t*t,e/2,n)},l=function(t){var e=0,n=t;while(n>=4096)e+=12,n/=4096;while(n>=2)e+=1,n/=2;return e},h=function(t,e,n){var i=-1,r=n;while(++i<6)r+=e*t[i],t[i]=r%1e7,r=d(r/1e7)},f=function(t,e){var n=6,i=0;while(--n>=0)i+=t[n],t[n]=d(i/e),i=i%e*1e7},g=function(t){var e=6,n="";while(--e>=0)if(""!==n||0===e||0!==t[e]){var i=String(t[e]);n=""===n?i:n+a.call("0",7-i.length)+i}return n},b=c&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!s((function(){c.call({})}));i({target:"Number",proto:!0,forced:b},{toFixed:function(t){var e,n,i,s,c=o(this),d=r(t),b=[0,0,0,0,0,0],p="",v="0";if(d<0||d>20)throw RangeError("Incorrect fraction digits");if(c!=c)return"NaN";if(c<=-1e21||c>=1e21)return String(c);if(c<0&&(p="-",c=-c),c>1e-21)if(e=l(c*u(2,69,1))-69,n=e<0?c*u(2,-e,1):c/u(2,e,1),n*=4503599627370496,e=52-e,e>0){h(b,0,n),i=d;while(i>=7)h(b,1e7,0),i-=7;h(b,u(10,i,1),0),i=e-1;while(i>=23)f(b,1<<23),i-=23;f(b,1<<i),h(b,1,1),f(b,2),v=g(b)}else h(b,0,n),h(b,1<<-e,0),v=g(b)+a.call("0",d);return d>0?(s=v.length,v=p+(s<=d?"0."+a.call("0",d-s)+v:v.slice(0,s-d)+"."+v.slice(s-d))):v=p+v,v}})},bb76:function(t,e,n){},ca39:function(t,e,n){"use strict";n("4de4"),n("b0c0"),n("caad"),n("2532"),n("b680"),n("5319"),n("ac1f"),n("d3b7"),n("25f0");e["a"]={data:function(){return{searchText:"",collection:[]}},computed:{filteredCollection:function(){var t=this;return this.collection.filter((function(e){return t.searchFilter(e)}))}},methods:{setSearchText:function(t){this.searchText=t},searchFilter:function(t){var e=t.name.toLowerCase(),n=this.searchText.toLowerCase();return!(n.length>1)||e.includes(n)},calculateCost:function(t){return t.quantity&&t.details?t.details.cost/t.details.avg_quantity*t.quantity:0},formatCost:function(t){var e=(t/1).toFixed(2);return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")}}}},caad:function(t,e,n){"use strict";var i=n("23e7"),r=n("4d64").includes,o=n("44d2");i({target:"Array",proto:!0},{includes:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),o("includes")},d28b:function(t,e,n){var i=n("746f");i("iterator")},d81d:function(t,e,n){"use strict";var i=n("23e7"),r=n("b727").map,o=n("1dde"),a=o("map");i({target:"Array",proto:!0,forced:!a},{map:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}})},e01a:function(t,e,n){"use strict";var i=n("23e7"),r=n("83ab"),o=n("da84"),a=n("5135"),s=n("861d"),c=n("9bf2").f,d=n("e893"),u=o.Symbol;if(r&&"function"==typeof u&&(!("description"in u.prototype)||void 0!==u().description)){var l={},h=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof h?new u(t):void 0===t?u():u(t);return""===t&&(l[e]=!0),e};d(h,u);var f=h.prototype=u.prototype;f.constructor=h;var g=f.toString,b="Symbol(test)"==String(u("test")),p=/^Symbol\((.*)\)[^)]+$/;c(f,"description",{configurable:!0,get:function(){var t=s(this)?this.valueOf():this,e=g.call(t);if(a(l,t))return"";var n=b?e.slice(7,-1):e.replace(p,"$1");return""===n?void 0:n}}),i({global:!0,forced:!0},{Symbol:h})}}}]);
//# sourceMappingURL=chunk-05a54293.1ede1d64.js.map