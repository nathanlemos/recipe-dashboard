(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6ff34557"],{"16ac":function(e,t,n){"use strict";n.r(t);n("b0c0");var i=n("7a23"),o={class:"inner-container"},r={class:"h1"},s=Object(i["f"])(" ingredient "),a={class:"grid"},c={class:"col-12"},u={class:"form-group"},l=Object(i["g"])("label",{for:""},"Name:",-1),d={class:"col-12"},p={class:"form-group"},h=Object(i["g"])("label",{for:""},"Article number:",-1),f={class:"col-4"},m={class:"form-group"},b=Object(i["g"])("label",{for:""},"Referencial quantity:",-1),g={class:"col-4"},v={class:"form-group"},y=Object(i["g"])("label",{for:""},"Unit:",-1),j={class:"col-4"},O={class:"form-group"},E=Object(i["g"])("label",{for:""},"Price per referencial quantity:",-1),S={class:"col-12 lg-only"},R={class:"btn",type:"submit"};function w(e,t,n,w,x,_){var q=Object(i["w"])("breadcrumbs"),N=Object(i["w"])("fab");return Object(i["p"])(),Object(i["d"])("div",o,[Object(i["g"])(q,{routerName:"ingredientList",name:"Ingredients list"}),Object(i["g"])("h1",r,[Object(i["g"])("strong",null,Object(i["y"])(e.isEditing?"Update":"Create"),1),s]),Object(i["g"])("form",{action:"javascript:;",onSubmit:t[6]||(t[6]=Object(i["F"])((function(t){return e.submit()}),["prevent"]))},[Object(i["g"])("div",a,[Object(i["g"])("div",c,[Object(i["g"])("div",u,[l,Object(i["E"])(Object(i["g"])("input",{type:"text",placeholder:"Name","onUpdate:modelValue":t[1]||(t[1]=function(e){return x.model.name=e})},null,512),[[i["B"],x.model.name]])])]),Object(i["g"])("div",d,[Object(i["g"])("div",p,[h,Object(i["E"])(Object(i["g"])("input",{type:"text",placeholder:"Article number","onUpdate:modelValue":t[2]||(t[2]=function(e){return x.model.article_number=e})},null,512),[[i["B"],x.model.article_number]])])]),Object(i["g"])("div",f,[Object(i["g"])("div",m,[b,Object(i["E"])(Object(i["g"])("input",{type:"text",placeholder:"Base quantity","onUpdate:modelValue":t[3]||(t[3]=function(e){return x.model.avg_quantity=e}),inputmode:"numeric"},null,512),[[i["B"],x.model.avg_quantity]])])]),Object(i["g"])("div",g,[Object(i["g"])("div",v,[y,Object(i["E"])(Object(i["g"])("select",{"onUpdate:modelValue":t[4]||(t[4]=function(e){return x.model.unit_id=e})},[(Object(i["p"])(!0),Object(i["d"])(i["a"],null,Object(i["v"])(x.unitOptions,(function(e){return Object(i["p"])(),Object(i["d"])("option",{key:e.value,value:e.value},Object(i["y"])(e.label),9,["value"])})),128))],512),[[i["A"],x.model.unit_id]])])]),Object(i["g"])("div",j,[Object(i["g"])("div",O,[E,Object(i["E"])(Object(i["g"])("input",{type:"text",placeholder:"Price per referencial quantity","onUpdate:modelValue":t[5]||(t[5]=function(e){return x.model.cost=e}),inputmode:"numeric"},null,512),[[i["B"],x.model.cost]])])]),Object(i["g"])("div",S,[Object(i["g"])("button",R,Object(i["y"])(e.isEditing?"Update":"Create"),1)])]),Object(i["g"])(N,{icon:"âœ“",onClick:e.submit},null,8,["onClick"])],32)])}n("d81d");var x=n("3cdc"),_=n("2446"),q={name:"IngredientForm",data:function(){return{endpoint:"ingredients/",route:"/ingredient",unitOptions:[],model:{id:null,name:"",article_number:"",avg_quantity:0,cost:0,unit_id:null}}},methods:{fetchUnits:function(){var e=this,t=this;this.axios.get("units/").then((function(e){var n=e.data.map((function(e){return{value:e.id,label:e.name}}));t.unitOptions=n,t.beforeRetrieve()})).catch((function(t){return e.handleResponseError(t)}))},canSubmit:function(){var e=[];return(!this.model.name||this.model.name.length<3)&&e.push("Name: Ensure this field has at least 3 characters."),(!this.model.article_number||this.model.article_number.length<3)&&e.push("Article Number: Ensure this field has at least 3 characters."),this.model.avg_quantity&&!isNaN(this.model.avg_quantity)||e.push("Base quantity: Ensure this value is greater than or equal to 1."),this.model.unit_id&&!isNaN(this.model.unit_id)||e.push("Unit: Inform the unit of the ingredient."),this.model.cost&&!isNaN(this.model.cost)||e.push("Price per referencial quantity: Ensure this value is greater than or equal to 0.01."),e.length?{response:{messages:e}}:{allowed:!0}}},mixins:[x["a"],_["a"]],mounted:function(){this.fetchUnits()}};q.render=w;t["default"]=q},2446:function(e,t,n){"use strict";n("a4d3"),n("e01a"),n("d3b7"),n("d28b"),n("3ca3"),n("ddb0");function i(e){return i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}n("25f0"),n("159b"),n("b64b"),t["a"]={methods:{showMessage:function(e,t){var n="Success!",i="#27ae60",o=60,r=(+new Date).toString(),s=document.getElementsByClassName("toast");"error"===e&&(n="Error!",i="#e74c3c");var a=document.createElement("div");a.id=r,a.classList.add("toast"),a.classList.add("shadow"),a.style.backgroundColor=i,a.style.top=o.toString()+"px",a.style.opacity=0;var c=document.createElement("h2");c.innerText=n;var u=document.createElement("ul");if(t&&t.length&&t.forEach((function(e){var t=document.createElement("li");t.innerText=e,u.appendChild(t)})),a.appendChild(c),a.appendChild(u),document.body.appendChild(a),s&&s.length){var l=15+a.offsetHeight;s.forEach((function(e){if(e.id!==r){var t=e.offsetTop+l;e.style.top=t.toString()+"px"}}))}a.style.opacity=1,setTimeout((function(){a.style.opacity=0,setTimeout((function(){a.remove()}),500)}),5e3)},handleResponseErrorPayload:function(e){var t=["An error occured"];e&&(e.response?"object"===i(e.response)&&e.response.data?e.response.data.errors?t=[e.response.data.errors]:e.response.data.message?t=[e.response.data.message]:"object"===i(e.response.data)&&(t=[],Object.keys(e.response.data).forEach((function(n){t.push(n+" "+e.response.data[n][0])}))):"string"===typeof e.response&&(t=[e.response]):e.messages?t=e.messages:"string"===typeof e&&(t=[e])),this.showMessage("error",t)}}}},"25f0":function(e,t,n){"use strict";var i=n("6eeb"),o=n("825a"),r=n("d039"),s=n("ad6d"),a="toString",c=RegExp.prototype,u=c[a],l=r((function(){return"/a/b"!=u.call({source:"a",flags:"b"})})),d=u.name!=a;(l||d)&&i(RegExp.prototype,a,(function(){var e=o(this),t=String(e.source),n=e.flags,i=String(void 0===n&&e instanceof RegExp&&!("flags"in c)?s.call(e):n);return"/"+t+"/"+i}),{unsafe:!0})},"3cdc":function(e,t,n){"use strict";n("a15b");var i=n("103c");t["a"]={data:function(){return{model:{},isEditing:!1,listViewName:"",route:"",collection:[]}},methods:{retrieve:function(){var e=this;this.axios.get(this.endpoint).then((function(t){e.collection=t.data})).catch((function(t){return e.handleResponseError(t)}))},destroy:function(e){var t=this;confirm(i["a"].DELETE_CONFIRMATION_MESSAGE)&&this.axios.delete(this.endpoint+e).then((function(e){t.showMessage("success",["Done!"]),t.retrieve()})).catch((function(e){return t.handleResponseError(e)}))},details:function(e){var t=this;this.axios.get(this.endpoint+e).then((function(e){return t.handleDetailsResponse(e)})).catch((function(e){return t.handleResponseError(e)}))},submit:function(){var e=this,t=this.canSubmit();if(!t.allowed)return this.handleSubmitRequestError(t);var n=this.model.id?this.axios.put(this.endpoint+this.model.id,this.model):this.axios.post(this.endpoint,this.model);n.then((function(t){return e.handleSubmitResponse(t)})).catch((function(t){return e.handleResponseError(t)}))},canSubmit:function(){return{allowed:!0}},beforeRetrieve:function(){this.$route.params&&this.$route.params.id&&(this.details(this.$route.params.id),this.isEditing=!0)},handleSubmitResponse:function(e){this.showMessage("success",["Done!"]),this.$router.push({path:this.route})},handleDetailsResponse:function(e){this.model=e.data},handleSubmitRequestError:function(e){this.handleResponseErrorPayload(e.response)},handleResponseError:function(e){this.handleResponseErrorPayload(e)},navigateToAdd:function(){this.$router.push({path:[this.route,"add"].join("/")})},navigateTo:function(e){this.$router.push({path:[this.route,"edit",e].join("/")})},navigateToDetails:function(e){this.$router.push({path:[this.route,"details",e].join("/")})}}}},a15b:function(e,t,n){"use strict";var i=n("23e7"),o=n("44ad"),r=n("fc6a"),s=n("a640"),a=[].join,c=o!=Object,u=s("join",",");i({target:"Array",proto:!0,forced:c||!u},{join:function(e){return a.call(r(this),void 0===e?",":e)}})},d28b:function(e,t,n){var i=n("746f");i("iterator")},d81d:function(e,t,n){"use strict";var i=n("23e7"),o=n("b727").map,r=n("1dde"),s=r("map");i({target:"Array",proto:!0,forced:!s},{map:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}})},e01a:function(e,t,n){"use strict";var i=n("23e7"),o=n("83ab"),r=n("da84"),s=n("5135"),a=n("861d"),c=n("9bf2").f,u=n("e893"),l=r.Symbol;if(o&&"function"==typeof l&&(!("description"in l.prototype)||void 0!==l().description)){var d={},p=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),t=this instanceof p?new l(e):void 0===e?l():l(e);return""===e&&(d[t]=!0),t};u(p,l);var h=p.prototype=l.prototype;h.constructor=p;var f=h.toString,m="Symbol(test)"==String(l("test")),b=/^Symbol\((.*)\)[^)]+$/;c(h,"description",{configurable:!0,get:function(){var e=a(this)?this.valueOf():this,t=f.call(e);if(s(d,e))return"";var n=m?t.slice(7,-1):t.replace(b,"$1");return""===n?void 0:n}}),i({global:!0,forced:!0},{Symbol:p})}}}]);
//# sourceMappingURL=chunk-6ff34557.7d4947d3.js.map